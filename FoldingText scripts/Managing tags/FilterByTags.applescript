-- List tags in the document-- Filter by selected tagsproperty pTitle : "Filter by tag"property pVer : "0.01"-- LIST TAGS IN DOCUMENT, -- AND SELECT TAGS TO TO FILTERtell application "FoldingText"	set lstDocs to documents	if lstDocs ≠ {} then		tell item 1 of lstDocs			-- LIST THE TAGS IN THE FRONT DOCUMENT,			set lstTags to my allTags(it)			set varChoice to choose from list lstTags with title pTitle & tab & pVer with prompt ¬				"(Cancel to unfilter)" & linefeed & linefeed & "Choose:" default items {} ¬				OK button name "OK" cancel button name "Cancel" with empty selection allowed and multiple selections allowed						-- AND FILTER THE DOCUMENT BY ANY USER-CHOSEN TAG(S)			if varChoice = false then				update node path it with text "///*"				return missing value			end if			set strPath to ""			repeat with i from 1 to length of varChoice				if i > 1 then set strPath to strPath & " UNION "				set strPath to strPath & "//@line:tag contains " & quoted form of item i of varChoice			end repeat			update node path it with text strPath		end tell	end ifend tellon allTags(oDoc)	set lstAllTags to {}	tell application "FoldingText"		tell oDoc			repeat with oNode in (read nodes it at path "//@line:tag") as list				repeat with oTag in (contents of (tagNames of oNode))					if lstAllTags does not contain oTag then set end of lstAllTags to contents of oTag				end repeat			end repeat		end tell	end tell	return lstAllTagsend allTags